<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Análisis Técnico: Load Tests SDK Facephi SelphID</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Análisis Técnico: Load Tests SDK Facephi SelphID</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#análisis-técnico-load-tests-sdk-facephi-selphid"
id="toc-análisis-técnico-load-tests-sdk-facephi-selphid">Análisis
Técnico: Load Tests SDK Facephi SelphID</a>
<ul>
<li><a href="#información-general"
id="toc-información-general">Información General</a></li>
<li><a href="#metodología-de-prueba"
id="toc-metodología-de-prueba">Metodología de Prueba</a>
<ul>
<li><a href="#timeline-preciso-de-ejecución"
id="toc-timeline-preciso-de-ejecución">Timeline Preciso de
Ejecución</a>
<ul>
<li><a href="#test-1---4-tps" id="toc-test-1---4-tps">Test 1 - 4 TPS</a></li>
<li><a href="#test-2---5-tps" id="toc-test-2---5-tps">Test 2 - 5 TPS</a></li>
<li><a href="#test-3---6-tps" id="toc-test-3---6-tps">Test 3 - 6 TPS</a></li>
</ul></li>
<li><a href="#configuración-de-tests"
id="toc-configuración-de-tests">Configuración de Tests</a></li>
<li><a href="#timeline-visual-de-ejecución"
id="toc-timeline-visual-de-ejecución">Timeline Visual de
Ejecución</a></li>
</ul></li>
<li><a href="#análisis-de-métricas-del-sistema"
id="toc-análisis-de-métricas-del-sistema">Análisis de Métricas del
Sistema</a>
<ul>
<li><a href="#memoria-comprometida-committed-memory"
id="toc-memoria-comprometida-committed-memory">1. Memoria Comprometida
(Committed Memory)</a></li>
<li><a href="#utilización-de-cpu" id="toc-utilización-de-cpu">2.
Utilización de CPU</a></li>
<li><a href="#load-average-del-sistema"
id="toc-load-average-del-sistema">3. Load Average del Sistema</a></li>
<li><a href="#memoria-ram-del-sistema"
id="toc-memoria-ram-del-sistema">4. Memoria RAM del Sistema</a></li>
</ul></li>
<li><a href="#análisis-de-capacidad-y-proyección"
id="toc-análisis-de-capacidad-y-proyección">Análisis de Capacidad y
Proyección</a>
<ul>
<li><a href="#modelo-de-escalabilidad-observado"
id="toc-modelo-de-escalabilidad-observado">Modelo de Escalabilidad
Observado</a></li>
<li><a href="#límites-operacionales-identificados"
id="toc-límites-operacionales-identificados">Límites Operacionales
Identificados</a></li>
<li><a href="#análisis-de-escalamiento-horizontal"
id="toc-análisis-de-escalamiento-horizontal">Análisis de Escalamiento
Horizontal</a></li>
</ul></li>
<li><a href="#timeline-de-ejecución-y-correlación-de-eventos"
id="toc-timeline-de-ejecución-y-correlación-de-eventos">Timeline de
Ejecución y Correlación de Eventos</a>
<ul>
<li><a href="#fase-1-test-4-tps-224000"
id="toc-fase-1-test-4-tps-224000">Fase 1: Test 4 TPS (22:40:00)</a></li>
<li><a href="#fase-2-test-5-tps-224230"
id="toc-fase-2-test-5-tps-224230">Fase 2: Test 5 TPS (22:42:30)</a></li>
<li><a href="#fase-3-test-6-tps-224500"
id="toc-fase-3-test-6-tps-224500">Fase 3: Test 6 TPS (22:45:00)</a></li>
</ul></li>
<li><a href="#conclusiones-y-recomendaciones"
id="toc-conclusiones-y-recomendaciones">Conclusiones y
Recomendaciones</a>
<ul>
<li><a href="#hallazgos-críticos" id="toc-hallazgos-críticos">Hallazgos
Críticos</a></li>
<li><a href="#impacto-en-producción"
id="toc-impacto-en-producción">Impacto en Producción</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="análisis-técnico-load-tests-sdk-facephi-selphid">Análisis
Técnico: Load Tests SDK Facephi SelphID</h1>
<h2 id="información-general">Información General</h2>
<p><strong>Fecha de Ejecución:</strong> 23 de Agosto, 2025<br />
<strong>SDK Evaluado:</strong> Facephi SelphID v6.14.0<br />
<strong>Endpoint Analizado:</strong>
<code>/api/v1/selphid/passive-liveness/evaluate/token</code><br />
<strong>Herramienta de Load Testing:</strong> Artillery<br />
<strong>Herramienta de Monitoreo:</strong> NetData</p>
<h2 id="metodología-de-prueba">Metodología de Prueba</h2>
<p>Se ejecutaron tres tests de carga secuenciales siguiendo la
metodología de escalamiento gradual:</p>
<h3 id="timeline-preciso-de-ejecución">Timeline Preciso de
Ejecución</h3>

<h4 id="test-1---4-tps"><strong>Test 1 - 4 TPS:</strong></h4>
<ul>
<li><strong>Inicio:</strong> 22:40:00 (timestamp: 1755920400000)</li>
<li><strong>Pico de Carga:</strong> 22:40:30 - 22:41:10 (40s sostenidos)</li>
<li><strong>Finalización:</strong> 22:41:20</li>
<li><strong>Duración Total:</strong> 80 segundos</li>
</ul>

<h4 id="test-2---5-tps"><strong>Test 2 - 5 TPS:</strong></h4>
<ul>
<li><strong>Inicio:</strong> 22:42:30 (timestamp: 1755920550000)</li>
<li><strong>Pico de Carga:</strong> 22:43:00 - 22:43:40 (40s sostenidos)</li>
<li><strong>Finalización:</strong> 22:43:50</li>
<li><strong>Duración Total:</strong> 80 segundos</li>
</ul>

<h4 id="test-3---6-tps"><strong>Test 3 - 6 TPS:</strong></h4>
<ul>
<li><strong>Inicio:</strong> 22:45:00 (timestamp: 1755920700000)</li>
<li><strong>Pico de Carga:</strong> 22:45:30 - 22:46:10 (40s sostenidos)</li>
<li><strong>Finalización:</strong> 22:46:20</li>
<li><strong>Duración Total:</strong> 80 segundos</li>
</ul>
<h3 id="configuración-de-tests">Configuración de Tests</h3>

<p>Cada test siguió el patrón:</p>

<ul>
<li><strong>10s:</strong> Ramp-up (0 → Target TPS)</li>
<li><strong>40s:</strong> Carga sostenida (Target TPS constante)</li>
<li><strong>10s:</strong> Ramp-down (Target TPS → 0)</li>
<li><strong>Timeout:</strong> 3 segundos por request</li>
</ul>
<h3 id="timeline-visual-de-ejecución">Timeline Visual de Ejecución</h3>
<figure>
<img src="../data/gant.png" alt="Load Test Timeline" />
<figcaption aria-hidden="true">Load Test Timeline</figcaption>
</figure>
<h2 id="análisis-de-métricas-del-sistema">Análisis de Métricas del
Sistema</h2>
<h3 id="memoria-comprometida-committed-memory">1. Memoria Comprometida
(Committed Memory)</h3>
<figure>
<img src="../data/sdk-6.14.0/activity/mem_committed.png" alt="Committed Memory" />
<figcaption aria-hidden="true">Committed Memory</figcaption>
</figure>
<p><strong>Hallazgos:</strong></p>
<ul>
<li><strong>Baseline:</strong> ~3.2 GB de memoria comprometida en estado de reposo</li>
<li><strong>Test 4 TPS (22:40:00):</strong> Incremento gradual a ~14.3 GB (+341% aumento)</li>
<li><strong>Test 5 TPS (22:42:30):</strong> Pico máximo de ~14.7 GB (+359% aumento)</li>
<li><strong>Test 6 TPS (22:45:00):</strong> Estabilización en ~14.6-14.7 GB</li>
</ul>

<p><strong>Análisis Crítico:</strong></p>
<ul>
<li><strong>Escalamiento exponencial:</strong> 3.2GB → 14.3GB en primer test (+347%)</li>
<li><strong>Persistencia de memoria:</strong> Sin liberación entre tests (indicativo de memory leak)</li>
<li><strong>Patrón no lineal:</strong> Incrementos adicionales menores en tests subsecuentes</li>
<li><strong>Proyección crítica:</strong> En condiciones de 10+ TPS, el sistema podría exceder la RAM disponible</li>
</ul>
<h3 id="utilización-de-cpu">2. Utilización de CPU</h3>
<figure>
<img src="../data/sdk-6.14.0/compute/system_cpu.png" alt="CPU Utilization" />
<figcaption aria-hidden="true">CPU Utilization</figcaption>
</figure>
<p><strong>Hallazgos por Test:</strong></p>

<h4><strong>Test 4 TPS:</strong></h4>
<ul>
<li><strong>User CPU:</strong> Picos de ~15-20%</li>
<li><strong>System CPU:</strong> Picos de ~5-8%</li>
<li><strong>Total CPU:</strong> ~25-30% durante carga sostenida</li>
</ul>

<h4><strong>Test 5 TPS:</strong></h4>
<ul>
<li><strong>User CPU:</strong> Incremento significativo a ~70-80%</li>
<li><strong>System CPU:</strong> ~6-8% consistente</li>
<li><strong>Total CPU:</strong> <strong>~85-90%</strong> - <strong>CRÍTICO</strong></li>
</ul>

<h4><strong>Test 6 TPS:</strong></h4>
<ul>
<li><strong>User CPU:</strong> Similar al test 5 TPS (~70-80%)</li>
<li><strong>System CPU:</strong> ~6-10%</li>
<li><strong>Total CPU:</strong> <strong>~85-95%</strong> - <strong>CRÍTICO</strong></li>
</ul>
<p><strong>Análisis Crítico - Escalamiento No Lineal:</strong></p>
<table>
<thead>
<tr>
<th>TPS</th>
<th>CPU Total</th>
<th>Factor de Escalamiento</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>~30%</td>
<td>Baseline</td>
</tr>
<tr>
<td>5</td>
<td>~90%</td>
<td><strong>300% incremento</strong></td>
</tr>
<tr>
<td>6</td>
<td>~95%</td>
<td><strong>317% incremento</strong></td>
</tr>
</tbody>
</table>
<p><strong>Interpretación:</strong></p>
<ul>
<li><strong>Escalamiento exponencial:</strong> +25% TPS → +300% CPU</li>
<li><strong>Punto de inflexión:</strong> Entre 4-5 TPS ocurre saturación crítica</li>
<li><strong>Límite físico:</strong> Sistema alcanza capacidad máxima en 5-6 TPS</li>
<li><strong>Proyección:</strong> 7+ TPS resultaría en colapso del sistema</li>
</ul>
<p><strong>Impacto en Response Times:</strong></p>
<ul>
<li>Con Load Average = 16, se esperan latencias de <strong>8-16x</strong> superiores al baseline</li>
<li>Timeout de 3s puede ser insuficiente en condiciones de alta carga</li>
</ul>
<h3 id="load-average-del-sistema">3. Load Average del Sistema</h3>
<figure>
<img src="../data/sdk-6.14.0/compute/system_load.png" alt="System Load" />
<figcaption aria-hidden="true">System Load</figcaption>
</figure>
<p><strong>Hallazgos:</strong></p>
<ul>
<li><strong>Load1 (1 minuto):</strong> Incremento de 0.5 a ~16 hilos</li>
<li><strong>Load5 (5 minutos):</strong> Crecimiento progresivo a ~7 hilos</li>
<li><strong>Load15 (15 minutos):</strong> Estable en ~4 hilos</li>
</ul>

<p><strong>Análisis:</strong></p>
<ul>
<li>Load1 indica saturación inmediata del sistema durante tests</li>
<li>Load5 y Load15 muestran impacto sostenido en el sistema</li>
<li>Sistema de 8 cores alcanza <strong>Load1 = 16</strong> (200% de saturación)</li>
</ul>
<h3 id="memoria-ram-del-sistema">4. Memoria RAM del Sistema</h3>
<figure>
<img src="../data/sdk-6.14.0/memory/system_ram.png" alt="System RAM" />
<figcaption aria-hidden="true">System RAM</figcaption>
</figure>
<p><strong>Hallazgos:</strong></p>
<ul>
<li><strong>Memoria Libre (Verde):</strong> Disminución significativa durante tests</li>
<li><strong>Memoria Usada (Azul):</strong> Incremento proporcional a la carga</li>
<li><strong>Cache/Buffers (Naranja):</strong> Mínimo impacto</li>
<li><strong>Total RAM:</strong> ~8 GB del sistema</li>
</ul>

<p><strong>Análisis:</strong></p>
<ul>
<li>Consumo de RAM proporcional a la carga de trabajo</li>
<li>Sin indicios de saturación completa de RAM</li>
<li>Cache del sistema se mantiene estable</li>
</ul>
<h2 id="análisis-de-capacidad-y-proyección">Análisis de Capacidad y
Proyección</h2>
<h3 id="modelo-de-escalabilidad-observado">Modelo de Escalabilidad
Observado</h3>
<p><strong>Comportamiento del Sistema por TPS:</strong></p>
<table>
<thead>
<tr>
<th>Métrica</th>
<th>4 TPS</th>
<th>5 TPS</th>
<th>6 TPS</th>
<th>Proyección 10 TPS</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CPU Total</strong></td>
<td>30%</td>
<td>90%</td>
<td>95%</td>
<td><strong>Sistema colapsa</strong></td>
</tr>
<tr>
<td><strong>Load1</strong></td>
<td>~6</td>
<td>~16</td>
<td>~16</td>
<td><strong>&gt;30 (inaceptable)</strong></td>
</tr>
<tr>
<td><strong>Memoria</strong></td>
<td>14.3GB</td>
<td>14.7GB</td>
<td>14.6GB</td>
<td><strong>&gt;16GB (OOM)</strong></td>
</tr>
<tr>
<td><strong>Estado</strong></td>
<td>Estable</td>
<td>Crítico</td>
<td>Límite</td>
<td><strong>Inviable</strong></td>
</tr>
</tbody>
</table>
<h3 id="límites-operacionales-identificados">Límites Operacionales
Identificados</h3>
<p><strong>Zona Verde (1-4 TPS):</strong></p>
<ul>
<li>CPU: &lt;40%</li>
<li>Load: &lt;8</li>
<li>Memoria: Crecimiento controlado</li>
<li><strong>Recomendación:</strong> Operación normal</li>
</ul>

<p><strong>Zona Amarilla (5 TPS):</strong></p>
<ul>
<li>CPU: ~90% (alerta crítica)</li>
<li>Load: 16 (saturación)</li>
<li><strong>Recomendación:</strong> Límite máximo con monitoreo intensivo</li>
</ul>

<p><strong>Zona Roja (6+ TPS):</strong></p>
<ul>
<li>CPU: &gt;95% (sistema al límite)</li>
<li><strong>Recomendación:</strong> Inviable para producción</li>
</ul>
<h3 id="análisis-de-escalamiento-horizontal">Análisis de Escalamiento
Horizontal</h3>
<p>Para cargas superiores a 4 TPS se requiere:</p>
<ul>
<li><strong>2 instancias</strong> para 8 TPS efectivos</li>
<li><strong>3 instancias</strong> para 12 TPS efectivos</li>
<li><strong>Load Balancer</strong> con health checks</li>
<li><strong>Monitoreo per-instancia</strong> de memoria y CPU</li>
</ul>
<h2 id="timeline-de-ejecución-y-correlación-de-eventos">Timeline de
Ejecución y Correlación de Eventos</h2>
<h3 id="fase-1-test-4-tps-224000">Fase 1: Test 4 TPS (22:40:00)</h3>
<ul>
<li><strong>Duración:</strong> ~1 minuto</li>
<li><strong>Impacto:</strong> Moderado</li>
<li><strong>CPU:</strong> 25-30%</li>
<li><strong>Memoria:</strong> Salto inicial de 3.2GB a 14.3GB</li>
<li><strong>Load1:</strong> Incremento a ~6</li>
</ul>
<h3 id="fase-2-test-5-tps-224230">Fase 2: Test 5 TPS (22:42:30)</h3>
<ul>
<li><strong>Duración:</strong> ~1 minuto</li>
<li><strong>Impacto:</strong> Alto</li>
<li><strong>CPU:</strong> 85-90% (<strong>Punto crítico</strong>)</li>
<li><strong>Memoria:</strong> Pico de 14.7GB</li>
<li><strong>Load1:</strong> Pico de ~16
(<strong>Saturación</strong>)</li>
</ul>
<h3 id="fase-3-test-6-tps-224500">Fase 3: Test 6 TPS (22:45:00)</h3>
<ul>
<li><strong>Duración:</strong> ~1 minuto</li>
<li><strong>Impacto:</strong> Crítico</li>
<li><strong>CPU:</strong> 85-95% (<strong>Límite del
sistema</strong>)</li>
<li><strong>Memoria:</strong> Mantenimiento en 14.6GB</li>
<li><strong>Load1:</strong> Sostenido en ~15-16</li>
</ul>
<h2 id="conclusiones-y-recomendaciones">Conclusiones y
Recomendaciones</h2>
<h3 id="hallazgos-críticos">Hallazgos Críticos</h3>
<ol type="1">
<li><strong>Memory Leak Identificado</strong>
<ul>
<li>Incremento permanente de memoria comprometida</li>
<li>Memoria no se libera entre tests</li>
<li><strong>Riesgo:</strong> OOM en cargas prolongadas</li>
</ul></li>
<li><strong>Saturación de CPU en 5-6 TPS</strong>
<ul>
<li>Escalamiento no lineal del CPU</li>
<li>Sistema alcanza 90-95% de utilización</li>
<li><strong>Límite operacional:</strong> ~4-5 TPS para operación
sostenible</li>
</ul></li>
<li><strong>Load Average Crítico</strong>
<ul>
<li>Load1 de 16 en sistema de 8 cores (200% saturación)</li>
<li>Indica colas de procesos esperando CPU</li>
<li><strong>Impacto:</strong> Latencias elevadas en responses</li>
</ul></li>
</ol>
<h3 id="impacto-en-producción">Impacto en Producción</h3>
<ul>
<li><strong>SLA Recomendado:</strong> &lt; 4 TPS para mantener
performance óptimo</li>
<li><strong>Escalamiento:</strong> Múltiples instancias requeridas para
&gt; 4 TPS</li>
<li><strong>Monitoreo:</strong> Crítico implementar alertas de memoria y
CPU</li>
</ul>
<hr />
<p><strong>Documento generado el:</strong> 23 de Agosto, 2025<br />
<strong>Analista:</strong> Claude Code Assistant<br />
<strong>Versión:</strong> 1.0</p>
</body>
</html>
